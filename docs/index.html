

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>networkx-query &mdash; networkx_query 0.2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> networkx_query
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">networkx_query</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>networkx-query</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="networkx-query">
<span id="index"></span><h1>networkx-query<a class="headerlink" href="#networkx-query" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://travis-ci.com/geronimo-iia/networkx-query"><img alt="Unix Build Status" src="https://img.shields.io/travis/geronimo-iia/networkx-query/master.svg?label=unix" /></a>
<a class="reference external image-reference" href="https://coveralls.io/r/geronimo-iia/networkx-query"><img alt="Coverage Status" src="https://img.shields.io/coveralls/geronimo-iia/networkx-query/master.svg" /></a>
<a class="reference external image-reference" href="https://www.codacy.com/app/geronimo-iia/networkx-query?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=geronimo-iia/networkx-query&amp;amp;utm_campaign=Badge_Grade"><img alt="Codacy Badge" src="https://api.codacy.com/project/badge/Grade/fe669a02b4aa46b5b1faf619ba2bf382" /></a>
<a class="reference external image-reference" href="https://scrutinizer-ci.com/g/geronimo-iia/networkx-query/?branch=master"><img alt="Scrutinizer Code Quality" src="https://img.shields.io/scrutinizer/g/geronimo-iia/networkx-query.svg" /></a>
<a class="reference external image-reference" href="https://pypi.org/project/networkx-query"><img alt="PyPI Version" src="https://img.shields.io/pypi/v/networkx-query.svg" /></a>
<a class="reference external image-reference" href="https://pypi.org/project/networkx-query"><img alt="PyPI License" src="https://img.shields.io/pypi/l/networkx-query.svg" /></a>
<p>Versions following <a class="reference external" href="https://semver.org/">Semantic Versioning</a></p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>NetworkX Query Tool (preview)</p>
<p>See <a class="reference external" href="https://geronimo-iia.github.io/networkx-query">documentation</a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Install this library directly into an activated virtual environment:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ pip install networkx-query
</pre></div>
</div>
<p>or add it to your <a class="reference external" href="https://poetry.eustace.io/">Poetry</a> project:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ poetry add networkx-query
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Searching node:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">from</span> <span class="nn">networkx_query</span> <span class="kn">import</span> <span class="n">search_nodes</span><span class="p">,</span> <span class="n">search_edges</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>
<span class="n">g</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s2">&quot;chocolate&quot;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s2">&quot;milk&quot;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="s2">&quot;coat&quot;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;shake&quot;</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;produce&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">search_nodes</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;==&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;product&quot;</span><span class="p">,),</span> <span class="s2">&quot;chocolate&quot;</span><span class="p">]}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">node_id</span><span class="p">)</span>

<span class="o">&gt;&gt;</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">edge_id</span> <span class="ow">in</span> <span class="n">search_edges</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;eq&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;action&quot;</span><span class="p">,),</span> <span class="s2">&quot;produce&quot;</span><span class="p">]}):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">edge_id</span><span class="p">)</span>

<span class="o">&gt;&gt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>You could do the same with edges using <code class="docutils literal notranslate"><span class="pre">search_edges</span></code>.</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://geronimo-iia.github.io/networkx-query/api.html#networkx_query.search_edges">search_edges</a> and <a class="reference external" href="https://geronimo-iia.github.io/networkx-query/api.html#networkx_query.search_nodes">search_nodes</a> are based on <a class="reference external" href="https://geronimo-iia.github.io/networkx-query/api.html#networkx_query.prepare_query">prepare_query</a> which return an Evaluator.</p>
<p>Evaluator are function with this signature: (context) -&gt; bool</p>
<p>Context is a dictionnary like structure (with in and [] methods, and support <strong>contains</strong> or  (<strong>iter</strong> and <strong>getitem</strong>))</p>
</div>
<div class="section" id="query-language">
<h2>Query language<a class="headerlink" href="#query-language" title="Permalink to this headline">¶</a></h2>
<p>Define a json query language like <a class="reference external" href="https://github.com/clue/json-query-language/blob/master/SYNTAX.md">json-query-language</a>
against nodes or edges attributes.</p>
<p>A Path is a single string or a tuple of string which represente a path in a tree (here a dictionnary).</p>
<div class="section" id="expressions">
<h3>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h3>
<p>All those expression are evaluate against a context wich is a dictionnary like (as can be a NodeDataView or an EdgeDataView).</p>
<p>Main expression syntax turn around this:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    operator_name : parameters
}
</pre></div>
</div>
</div>
<div class="section" id="basic-matching-expression">
<h3>Basic matching expression<a class="headerlink" href="#basic-matching-expression" title="Permalink to this headline">¶</a></h3>
<p>Test if a node/edge has an attribute named “my_property”:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    &quot;has&quot; : &quot;my_property&quot;
}
</pre></div>
</div>
<p>Test if a node/edge has an attribute product : { “definition”: { “name”: xxx }} with xxx equals to “chocolate”.</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    &quot;eq&quot; : [ (&quot;product&quot;, &quot;definition&quot;, &quot;name&quot;), &quot;chocolate&quot;]
}
</pre></div>
</div>
<p>We support this operators:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Alias</p></th>
<th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>has</p></td>
<td></td>
<td><p>Path</p></td>
<td><p>Check if path exists in context.</p></td>
</tr>
<tr class="row-odd"><td><p>contains</p></td>
<td></td>
<td><p>Path, str</p></td>
<td><p>Check if an attribut (specifed with path) exists and contains specified value.</p></td>
</tr>
<tr class="row-even"><td><p>eq</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">==</span></code></p></td>
<td><p>Path, Any</p></td>
<td><p>Check if an attribut (specifed with path) exists and equals specified value.</p></td>
</tr>
<tr class="row-odd"><td><p>neq</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">!=</span></code></p></td>
<td><p>Path, Any</p></td>
<td><p>Check if an attribut (specifed with path) did not exists or not equals specified value.</p></td>
</tr>
<tr class="row-even"><td><p>gt</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p>Path, Any</p></td>
<td><p>Check if an attribut (specifed with path) exists and greather that specified value.</p></td>
</tr>
<tr class="row-odd"><td><p>lt</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p>Path, Any</p></td>
<td><p>Check if an attribut (specifed with path) exists and lower that specified value.</p></td>
</tr>
<tr class="row-even"><td><p>gte</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td><p>Path, Any</p></td>
<td><p>Check if an attribut (specifed with path) exists and greather or equals that specified value.</p></td>
</tr>
<tr class="row-odd"><td><p>lte</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></td>
<td><p>Path, Any</p></td>
<td><p>Check if an attribut (specifed with path) exists and lower or equals that specified value.</p></td>
</tr>
<tr class="row-even"><td><p>in</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">:=</span></code></p></td>
<td><p>Path, List[Any]</p></td>
<td><p>Check if an attribut (specifed with path) exists and attribut value in specified values.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="boolean-composition-of-matching-expression">
<h3>Boolean composition of matching expression<a class="headerlink" href="#boolean-composition-of-matching-expression" title="Permalink to this headline">¶</a></h3>
<p>We support this operators:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Alias</p></th>
<th class="head"><p>Parameters</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>and</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code></p></td>
<td><p>list of query</p></td>
<td><p>Define And operator.</p></td>
</tr>
<tr class="row-odd"><td><p>or</p></td>
<td><p>||</p></td>
<td><p>list of query</p></td>
<td><p>Define Or operator.</p></td>
</tr>
<tr class="row-even"><td><p>xor</p></td>
<td></td>
<td><p>list of query</p></td>
<td><p>Define xor operator.</p></td>
</tr>
<tr class="row-odd"><td><p>nxor</p></td>
<td></td>
<td><p>list of query</p></td>
<td><p>Define nxor operator.</p></td>
</tr>
<tr class="row-even"><td><p>not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">!</span></code></p></td>
<td><p>query</p></td>
<td><p>Define Not operator.</p></td>
</tr>
</tbody>
</table>
<p>By default, a list of expressions is equivalent of an “AND” of this expressions.</p>
<p>Example:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    &#39;not&#39;: {
        &#39;has&#39;: [&#39;group&#39;]
    },
    &#39;has&#39;: &#39;application&#39;,
    &#39;eq&#39;: [(&#39;_link&#39;, &#39;other&#39;, &#39;weight&#39;), 2]
}
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>{
    &#39;and&#39;: [
        {
            &#39;not&#39;: [
                {
                    &#39;has&#39;: [&#39;group&#39;]
                }
            ]
        },
        {
            &#39;has&#39;: [&#39;application&#39;]
        },
        {
            &#39;eq&#39;: [(&#39;_link&#39;, &#39;other&#39;, &#39;weight&#39;), 2]
        }
    ]
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="wished-features">
<h2>Wished Features<a class="headerlink" href="#wished-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>add match node, edges, path specification</p></li>
<li><p>add set expression on node/edges with constraints</p></li>
<li><p>add path condition between node</p></li>
</ul>
</div>
</div>
<div class="section" id="contents">
<h1>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Jerome Guibert

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>